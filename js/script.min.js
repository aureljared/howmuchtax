// Import tax calculator.
// (c) aureljared, 2016.
// GPLv3
var rates={},entered={costGoods:0,rateDuty:0,wharfage:0,freightCost:0,bankCharge:0,insurance:0,brokerageFee:0,other:0,arrastre:0,rate:0};$(document).ready(function(){var e=0,t=function(t){var r=$(t).children().first(),a=$(r).attr("id"),n=a.toUpperCase(),i="http://api.fixer.io/latest?base="+n;$.get(i,function(t,a){var i=JSON.parse(JSON.stringify(t)),s={rate:i.rates.PHP,date:i.date};$(r).children().first().text(s.rate),rates[n]=s.rate,rates.date=s.rate,"USD"==n&&($("#currency span").text(s.rate),entered.rate=s.rate),e++,3==e&&$("input").each(function(){$(this).removeAttr("disabled")})})};$("li").each(function(){t(this),$(this).click(function(){r($(this).children().first().attr("id"))})}),$("input").each(function(){$(this).change(function(){var e=$(this).attr("data-entry"),t=Number($(this).val());entered[e]=t,a()})});var r=function(e){entered.rate=rates[e.toUpperCase()],$("#currency").html(e.toUpperCase()+" <strong><span>"+entered.rate+"</span></strong>"),a(),$(".currency-sign").each(function(){$(this).text(e.toUpperCase())})},a=function(){var e=entered,t=(e.costGoods+e.freightCost+e.insurance+e.other)*e.rate,r=t*e.rateDuty;if(25e4>=t)var a=250;else if(5e5>=t)var a=500;else if(75e4>=t)var a=750;else var a=1e3;$("#ipf").text(a);var n=t+e.bankCharge+r+e.brokerageFee+e.arrastre+e.wharfage,i=.12*n,s=n+i;$("#total strong").text(s.toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))}});